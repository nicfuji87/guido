[
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "5ee10eda-b047-4f4e-942c-22cb9b3a3807",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC001-User Registration via Magic Link",
    "description": "Verify that a user can successfully register by providing a valid email and receiving a magic link to authenticate, starting a 7-day trial.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on the registration button to open the registration form or input field for email.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora - GRÁTIS' button to start registration process\n        elem = frame.locator('xpath=html/body/div/div/section/div[2]/div/div/div[6]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Começar Agora' button for the Plano Corretor plan to proceed to email input.\n        frame = context.pages[-1]\n        # Click 'Começar Agora' button for Plano Corretor plan\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input a valid email address into the email field (index 39) and fill other required fields to proceed with registration.\n        frame = context.pages[-1]\n        # Input full name in 'Nome completo' field\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input valid email address in 'Email' field\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('validuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input WhatsApp number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Input CPF number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678900')\n        \n\n        frame = context.pages[-1]\n        # Input CEP\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678')\n        \n\n        frame = context.pages[-1]\n        # Input Número da Residência\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n\n        frame = context.pages[-1]\n        # Input Complemento (optional)\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Apt 101')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the WhatsApp, CPF, and CEP inputs with valid data and resubmit the registration form.\n        frame = context.pages[-1]\n        # Correct WhatsApp number to valid format\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11987654321')\n        \n\n        frame = context.pages[-1]\n        # Correct CPF to valid format\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678909')\n        \n\n        frame = context.pages[-1]\n        # Correct CEP to valid format\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001000')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to resubmit registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/div/input[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Começar teste grátis' button to submit the registration form and trigger the magic link email.\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        await expect(frame.locator('text=7 days free, no credit card required').first).to_be_visible(timeout=30000)\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298953045422//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.641Z",
    "modified": "2025-11-04T23:29:13.266Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "d7e48bce-7125-4a97-b6de-8ae3eae69b6c",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC002-Login with Invalid Email",
    "description": "Ensure that login fails when an invalid or unregistered email is used to request a magic link.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on the Login button to navigate to the login page\n        frame = context.pages[-1]\n        # Click on the Login button to navigate to the login page\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input an invalid or unregistered email address into the email field\n        frame = context.pages[-1]\n        # Input invalid or unregistered email address into the email field\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('invalidemail@example.com')\n        \n\n        # -> Click the 'Enviar link de acesso' button to request the magic link\n        frame = context.pages[-1]\n        # Click the 'Enviar link de acesso' button to request the magic link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Login Successful').first).to_be_visible(timeout=30000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The login did not fail as expected when using an invalid or unregistered email to request a magic link. The error notification indicating the email is not recognized was not displayed.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The system incorrectly allows requesting a magic link with an invalid or unregistered email by showing a success message instead of an error notification. This means the login does not fail as expected for invalid emails. Task is stopped as the expected failure behavior is not met.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298369555255//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.647Z",
    "modified": "2025-11-04T23:19:29.726Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "3dff3fe8-4f81-457b-b979-50fdd328f45c",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC003-Dashboard Load and Data Refresh",
    "description": "Validate that the dashboard loads within 3 seconds and updates metrics and widgets in real-time for both roles: corretor and gestor.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on the Login button to start login as corretor.\n        frame = context.pages[-1]\n        # Click on the Login button to start login as corretor\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email for corretor and submit to login.\n        frame = context.pages[-1]\n        # Input email for corretor login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('corretor@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click on 'Enviar link de acesso' button to submit login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate login completion for corretor and navigate to dashboard page.\n        await page.goto('http://localhost:3000/dashboard', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Click on the Login button to start login as corretor.\n        frame = context.pages[-1]\n        # Click on the Login button to start login as corretor\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email for corretor and submit to login.\n        frame = context.pages[-1]\n        # Input email for corretor login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('corretor@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click on 'Enviar link de acesso' button to submit login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate login completion for corretor and navigate to dashboard page.\n        await page.goto('http://localhost:3000/dashboard', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Click on Login button to retry login as corretor.\n        frame = context.pages[-1]\n        # Click on Login button to retry login as corretor\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email for corretor and submit to login.\n        frame = context.pages[-1]\n        # Input email for corretor login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('corretor@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click on 'Enviar link de acesso' button to submit login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Dashboard Load Successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: The dashboard did not load within 3 seconds and/or widgets did not update in real-time for both roles 'corretor' and 'gestor' as required by the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The login process for the corretor role is not functioning as expected. After submitting the email on the login page, no confirmation or navigation to the dashboard occurs. This prevents further testing of dashboard load time and real-time updates for both corretor and gestor roles. The issue has been reported. Task stopped.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298631325016//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.653Z",
    "modified": "2025-11-04T23:23:51.502Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "e6c2c550-013c-4952-853f-f5bf2ca595b8",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC004-WhatsApp Integration Sync Messages",
    "description": "Check synchronization of WhatsApp messages happens within 5 seconds, preserving complete conversation history and updating notification badges accordingly.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Começar Agora - GRÁTIS' button to start onboarding and connect WhatsApp via QR code.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora - GRÁTIS' button to start onboarding and connect WhatsApp via QR code\n        elem = frame.locator('xpath=html/body/div/div/section/div[2]/div/div/div[6]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Começar Agora' button under 'Plano Corretor' to proceed with onboarding and WhatsApp connection.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora' button under 'Plano Corretor' to proceed with onboarding and WhatsApp connection\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the 'Nome completo', 'Email', and 'WhatsApp' fields with test data to create account and proceed.\n        frame = context.pages[-1]\n        # Fill 'Nome completo' with 'Test User'\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Fill 'Email' with 'testuser@example.com'\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Fill 'WhatsApp' with '11999999999'\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit the form and create account\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the WhatsApp number format and fill valid CPF, CEP, and Número da Residência fields, then submit the form again.\n        frame = context.pages[-1]\n        # Correct WhatsApp number to valid format without special characters\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11987654321')\n        \n\n        frame = context.pages[-1]\n        # Fill CPF with valid format without dots or dashes\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678909')\n        \n\n        frame = context.pages[-1]\n        # Fill CEP with valid format without dash\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345000')\n        \n\n        frame = context.pages[-1]\n        # Fill Número da Residência with valid number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit the corrected form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the CEP field with a valid and recognized CEP value and submit the form again.\n        frame = context.pages[-1]\n        # Correct CEP field with a valid and recognized CEP value\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001-000')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit the form again after correcting CEP\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/div/input[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Começar teste grátis' button to submit the form and create the account, then proceed to WhatsApp QR code connection.\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit the form and create account\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Close the error modal and input a unique CPF number, then resubmit the form to create the account and proceed to WhatsApp QR code connection.\n        frame = context.pages[-1]\n        # Click 'Fechar' button to close the duplicate CPF error modal\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Começar Agora' button under 'Plano Corretor' to restart the account creation process with unique user data.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora' button under 'Plano Corretor' to restart account creation\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the account creation form with unique user data including name, email, WhatsApp, CPF, CEP, and Número da Residência, then submit the form.\n        frame = context.pages[-1]\n        # Fill 'Nome completo' with 'Unique User'\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Unique User')\n        \n\n        frame = context.pages[-1]\n        # Fill 'Email' with 'uniqueuser@example.com'\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('uniqueuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Fill 'WhatsApp' with '11988887777'\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11988887777')\n        \n\n        frame = context.pages[-1]\n        # Fill 'CPF' with a unique valid CPF number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('98765432100')\n        \n\n        frame = context.pages[-1]\n        # Fill 'CEP' with a valid recognized CEP\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001-000')\n        \n\n        # -> Correct the WhatsApp number field with a valid and recognized WhatsApp number, then submit the form again.\n        frame = context.pages[-1]\n        # Correct WhatsApp number to a valid and recognized number format\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit the form after correcting WhatsApp number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the WhatsApp number to a valid format and ensure Número da Residência field is properly filled without validation errors, then submit the form again.\n        frame = context.pages[-1]\n        # Correct WhatsApp number to valid format\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Correct Número da Residência to a valid non-empty value\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('1234')\n        \n\n        # -> Correct the WhatsApp number to a valid format accepted by the system, then submit the form again.\n        frame = context.pages[-1]\n        # Correct WhatsApp number to valid format (11) 99999-9999\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit the form after correcting WhatsApp number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Message synchronization successful').first).to_be_visible(timeout=5000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: WhatsApp message synchronization did not complete within 5 seconds, conversation history may be incomplete, or notification badges did not update correctly as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The onboarding process to connect WhatsApp via QR code was successfully completed, including account creation with valid user data. However, the critical steps to test WhatsApp message synchronization within 5 seconds, preservation of complete conversation history, and notification badge updates were not performed in this session. Therefore, the task is not fully finished as requested. Further testing is needed to verify message synchronization and notification badge updates after WhatsApp connection.\nBrowser Console Logs:\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&email=eq.testuser%40example.com:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&cpf=eq.123.456.789-09:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/usuarios?select=id&whatsapp=eq.%2811%29+98765-4321:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 409 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/contas?select=*:0:0)\n[ERROR] 2025-11-04T23:20:36.402Z [SIGNUP] Erro ao criar conta {code: 23505, details: Key (documento)=(12345678909) already exists., hint: null, message: duplicate key value violates unique constraint \"contas_documento_key\"} (at http://localhost:3000/src/utils/logger.ts:57:14)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&email=eq.uniqueuser%40example.com:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&cpf=eq.987.654.321-00:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/usuarios?select=id&whatsapp=eq.%2811%29+99999-9999:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id%2Cnome%2Cdeleted_at&email=eq.uniqueuser%40example.com:0:0)\n[WARNING] 2025-11-04T23:23:55.909Z [useAuth] Corretor não encontrado para o email {email: uniqueuser@example.com, error: Object} (at http://localhost:3000/src/utils/logger.ts:50:14)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/usuarios?select=*&auth_user_id=eq.f8662d04-392c-488b-9224-0235b52e1a7e:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=*&email=eq.uniqueuser%40example.com:0:0)\n[ERROR] 2025-11-04T23:23:56.885Z [SIGNUP_RECOVERY] Corretor não encontrado - signup incompleto irreversível {authUserId: f8662d04-392c-488b-9224-0235b52e1a7e, email: uniqueuser@example.com} (at http://localhost:3000/src/utils/logger.ts:57:14)\n[ERROR] 2025-11-04T23:23:56.885Z [useAuth] ❌ Não foi possível recuperar cadastro {authUserId: f8662d04-392c-488b-9224-0235b52e1a7e, email: uniqueuser@example.com} (at http://localhost:3000/src/utils/logger.ts:57:14)\n[WARNING] 2025-11-04T23:23:56.886Z [useAuth] Login negado: corretor não ativo {email: uniqueuser@example.com, event: SIGNED_IN} (at http://localhost:3000/src/utils/logger.ts:50:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/176229890604785//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.660Z",
    "modified": "2025-11-04T23:28:26.251Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "68bb07d6-38dc-442a-9265-9131d3422aeb",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC005-Create and Notify Reminders",
    "description": "Validate the creation of reminders, automatic WhatsApp notification sending, and marking reminders as complete with UI updates and repeat scheduling.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Navigate to reminders management page\n        frame = context.pages[-1]\n        # Click on Login button to access user area where reminders management might be available\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email and send access link to login\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Navigate to reminders management page after login\n        frame = context.pages[-1]\n        # Click on 'Guido' logo or home link to navigate to main page or dashboard after login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Scroll down to find and click the navigation element or button that leads to the reminders management page\n        await page.mouse.wheel(0, 500)\n        \n\n        frame = context.pages[-1]\n        # Click on 'Como funciona o sistema de lembretes?' button to access reminders management or information\n        elem = frame.locator('xpath=html/body/div/div/section[7]/div/div[2]/div[10]/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Reminder creation successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: Reminder creation, WhatsApp notification sending, and UI updates for marking reminders as complete did not execute as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The reminders management page could not be accessed from the current UI. Navigation attempts via FAQ and homepage buttons only expanded FAQ content without leading to the required page. Therefore, the task to validate reminder creation, WhatsApp notification sending, and marking reminders as complete cannot be completed. Please verify the UI for proper access to the reminders management features.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/176229856909093//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.666Z",
    "modified": "2025-11-04T23:22:49.309Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "cde28dd3-0164-475b-89df-57c662dadf30",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC006-Kanban Drag and Drop Client Between Funnel Stages",
    "description": "Check that dragging a client card between different sales funnel stages updates the status and metrics immediately and persists after page reload.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the Login button to access the user area where the Kanban board might be available.\n        frame = context.pages[-1]\n        # Click the Login button to access user area\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email into the email field and click 'Enviar link de acesso' to log in.\n        frame = context.pages[-1]\n        # Input email into the email field\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Check for access to Kanban board or navigate to it if possible.\n        frame = context.pages[-1]\n        # Click on 'Guido' logo or link to navigate to main dashboard or home after login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the Login button to access the login form and proceed with authentication.\n        frame = context.pages[-1]\n        # Click the Login button to access login form\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email into the email field and click 'Enviar link de acesso' to log in.\n        frame = context.pages[-1]\n        # Input email into the email field\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate login by navigating to the Kanban board or check for navigation elements to access the sales funnel Kanban board.\n        await page.goto('http://localhost:3000/kanban', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Look for navigation elements or buttons on the homepage that might lead to the Kanban board or sales funnel.\n        await page.mouse.wheel(0, 500)\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar Agora - GRÁTIS' button which might lead to user dashboard or Kanban board\n        elem = frame.locator('xpath=html/body/div/div/section/div[2]/div/div/div[6]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the Login button to try to log in and access the Kanban board from the authenticated area.\n        frame = context.pages[-1]\n        # Click the Login button to access login form\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email into the email field and click 'Enviar link de acesso' to log in.\n        frame = context.pages[-1]\n        # Input email into the email field\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate login by navigating to the Kanban board or check for navigation elements to access the sales funnel Kanban board.\n        await page.goto('http://localhost:3000/dashboard', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Click the Login button to access the login form and proceed with authentication.\n        frame = context.pages[-1]\n        # Click the Login button to access login form\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Client card successfully moved to new stage').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Dragging a client card between sales funnel stages did not update the status and metrics immediately or persist after page reload as required by the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The task to check that dragging a client card between different sales funnel stages updates the status and metrics immediately and persists after page reload could not be fully completed. The login process requires an access link sent by email, which was not used to authenticate and access the Kanban board. Without access to the Kanban board, the drag-and-drop functionality and persistence could not be tested.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298818717708//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.672Z",
    "modified": "2025-11-04T23:26:58.897Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "b6c5b407-259e-456d-891c-7790e77ab393",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC007-Subscription and Payment Processing",
    "description": "Verify that subscription status updates correctly based on payments through Asaas gateway and cancelation requests update status and UI notifications accordingly.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Login' button to access user account for subscription.\n        frame = context.pages[-1]\n        # Click on Login button to access user account for subscription\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input user email to login and send access link.\n        frame = context.pages[-1]\n        # Input user email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate user login by navigating to the access link or proceed to subscription page if accessible.\n        await page.goto('http://localhost:3000/subscription', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Click on 'Planos' button to navigate to subscription plans page.\n        frame = context.pages[-1]\n        # Click on 'Planos' button to go to subscription plans page\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[4]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Começar Agora' button to subscribe to the paid plan.\n        frame = context.pages[-1]\n        # Click 'Começar Agora' button to subscribe to the 'Plano Corretor' paid plan\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the subscription form with user details and submit to start free trial and subscription.\n        frame = context.pages[-1]\n        # Input full name in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input email in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input WhatsApp number in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Input CPF in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123.456.789-00')\n        \n\n        frame = context.pages[-1]\n        # Input CEP in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345-678')\n        \n\n        frame = context.pages[-1]\n        # Input house number in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n\n        frame = context.pages[-1]\n        # Input address complement in subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Apartment 101')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the WhatsApp, CPF, and CEP fields with valid data and resubmit the subscription form.\n        frame = context.pages[-1]\n        # Correct WhatsApp number to valid format\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Correct CPF to valid format without punctuation\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678900')\n        \n\n        frame = context.pages[-1]\n        # Correct CEP to a valid postal code\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001-000')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to resubmit subscription form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/div/input[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Subscription Activated Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Subscription status did not update correctly after payment via Asaas gateway, cancellation requests did not update status and UI notifications as expected, or payment failure notifications were not shown as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Subscription form submission is failing despite valid inputs. Unable to proceed with subscription, payment, cancellation, and webhook tests. Reporting issue and stopping further testing.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/17622986801976//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.678Z",
    "modified": "2025-11-04T23:24:40.387Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "a2f79788-e4e9-435c-97ea-c4b05eb2b63b",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC008-User Role Management and Access Control",
    "description": "Ensure that gestores can invite, edit permissions and manage corretores with correct access control and data isolation implemented via row-level security.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on the Login button to proceed with gestor login.\n        frame = context.pages[-1]\n        # Click on the Login button to start gestor login\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input gestor email and send access link to login.\n        frame = context.pages[-1]\n        # Input gestor email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('gestor@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' to send access link for gestor login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Gestor has full access to all tenant data').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: Gestores cannot invite, edit permissions, or manage corretores with correct access control and data isolation as per the test plan.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The task to ensure gestores can invite, edit permissions, and manage corretores could not be completed due to a critical issue with the gestor login process. After entering the email and clicking 'Enviar link de acesso', no confirmation or navigation occurred, blocking all further testing steps. The issue has been reported. Please fix the login functionality to enable further testing.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298405595872//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.685Z",
    "modified": "2025-11-04T23:20:05.750Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "590ea073-da2e-4e65-bced-1f09fbac825d",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC009-Real-Time Notifications and Toast Messages",
    "description": "Validate that system-generated notifications appear as toasts with badges in real time across various modules such as conversations, reminders and payment status updates.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Trigger a new message in WhatsApp conversation to check for notification toast and badge update.\n        frame = context.pages[-1]\n        # Click WhatsApp icon to open conversation and trigger new message notification\n        elem = frame.locator('xpath=html/body/div/div/div/div/div[2]/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Scroll down or search for WhatsApp conversation or notification trigger element to click.\n        await page.mouse.wheel(0, 300)\n        \n\n        # -> Click the WhatsApp icon (index 43) to trigger a new message notification and check for toast and badge update.\n        frame = context.pages[-1]\n        # Click WhatsApp icon to open conversation and trigger new message notification\n        elem = frame.locator('xpath=html/body/div/div/div/div/div[2]/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Scroll down to explore more page content or find alternative elements to trigger WhatsApp message notification.\n        await page.mouse.wheel(0, await page.evaluate('() => window.innerHeight'))\n        \n\n        # -> Click the WhatsApp icon (index 46) at bottom right corner to trigger a new message notification and check for toast and badge update.\n        frame = context.pages[-1]\n        # Click WhatsApp icon with badge 46 to trigger new message notification\n        elem = frame.locator('xpath=html/body/div/div/div/div/div[2]/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=System Notification: Payment Successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: Expected real-time system-generated notifications as toasts with badges for conversations, reminders, and payment status updates, but the notification did not appear as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Testing stopped due to inability to trigger WhatsApp message notification. The WhatsApp icon element is not interactable, preventing validation of notification toasts and badge updates. Please investigate the UI or backend issue preventing real-time notification display.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298798931024//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.692Z",
    "modified": "2025-11-04T23:26:39.112Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "77678eca-9f1b-48bd-82eb-ef89f8dfd087",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC010-Onboarding Flow Completion Under 30 Minutes",
    "description": "Confirm that a new user can complete onboarding, including WhatsApp connection via QR code, profile setup, and initial tour in less than 30 minutes.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Começar Agora - GRÁTIS' button to start registration.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora - GRÁTIS' button to start registration.\n        elem = frame.locator('xpath=html/body/div/div/section/div[2]/div/div/div[6]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Começar Agora' button for Plano Corretor to proceed with registration.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora' button for Plano Corretor to proceed with registration.\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the registration form fields with valid user data and click 'Começar teste grátis' to submit.\n        frame = context.pages[-1]\n        # Input full name in 'Nome completo' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input email in 'Email' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input WhatsApp number in 'WhatsApp' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Input CPF in 'CPF' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678900')\n        \n\n        frame = context.pages[-1]\n        # Input CEP in 'CEP' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345000')\n        \n\n        frame = context.pages[-1]\n        # Input house number in 'Número da Residência' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n\n        frame = context.pages[-1]\n        # Input optional complement in 'Complemento' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Apt 101')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit registration form.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the WhatsApp number, CPF, and CEP fields with valid data and resubmit the registration form.\n        frame = context.pages[-1]\n        # Input valid WhatsApp number in 'WhatsApp' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11987654321')\n        \n\n        frame = context.pages[-1]\n        # Input valid CPF in 'CPF' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678909')\n        \n\n        frame = context.pages[-1]\n        # Input valid CEP in 'CEP' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001-000')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to resubmit registration form with valid data.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try to refresh the page or re-enter the CEP to trigger validation again, then resubmit the form.\n        frame = context.pages[-1]\n        # Click on CEP input field to re-enter or trigger validation.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Re-enter valid CEP to trigger validation.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001-000')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to resubmit registration form.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try to refresh the page to reset the form and trigger CEP validation again, then attempt registration submission once more.\n        await page.goto('http://localhost:3000/', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Click on 'Começar Agora - GRÁTIS' button to restart registration.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora - GRÁTIS' button to start registration.\n        elem = frame.locator('xpath=html/body/div/div/section/div[2]/div/div/div[6]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Começar Agora' button for Plano Corretor to proceed with registration.\n        frame = context.pages[-1]\n        # Click on 'Começar Agora' button for Plano Corretor to proceed with registration.\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Começar teste grátis' button to submit the registration form and create the account.\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit registration form.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Clear the 'Número da Residência' field and re-enter the value using a different method, then resubmit the form.\n        frame = context.pages[-1]\n        # Click on 'Número da Residência' input field to focus.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Clear the 'Número da Residência' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('')\n        \n\n        frame = context.pages[-1]\n        # Re-enter '123' in 'Número da Residência' field.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to resubmit the form.\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Onboarding Completed Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: The onboarding process did not complete successfully within 30 minutes as required by the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The onboarding process for a new user was tested from registration through to account creation submission. The user was able to navigate the site, fill the registration form with valid data, and submit it. However, the process failed at the final step due to a duplicate key error on the CPF field, preventing account creation. Consequently, the WhatsApp QR code connection, profile setup, and onboarding tour could not be completed. The total onboarding process could not be completed successfully within 30 minutes due to this blocking error.\nBrowser Console Logs:\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&email=eq.testuser%40example.com:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&cpf=eq.123.456.789-09:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/usuarios?select=id&whatsapp=eq.%2811%29+98765-4321:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 409 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/contas?select=*:0:0)\n[ERROR] 2025-11-04T23:24:03.219Z [SIGNUP] Erro ao criar conta {code: 23505, details: Key (documento)=(12345678909) already exists., hint: null, message: duplicate key value violates unique constraint \"contas_documento_key\"} (at http://localhost:3000/src/utils/logger.ts:57:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298905563326//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.701Z",
    "modified": "2025-11-04T23:28:25.699Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "6feeab7f-456b-44b9-a19d-749623516b45",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC011-Responsive UI on Multiple Devices",
    "description": "Verify that all pages and key components render correctly and remain fully functional on desktop, tablet, and mobile screen sizes.",
    "testStatus": "FAILED",
    "testError": "Test execution timed out after 15 minutes",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "",
    "created": "2025-11-04T23:16:19.710Z",
    "modified": "2025-11-04T23:16:19.710Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "faf37163-d463-41f6-b147-8bb6d64468ae",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC012-Error Handling for External API Failures",
    "description": "Ensure the system gracefully handles failures from external services such as Evolution API, Asaas, and n8n, showing user-friendly error messages and retry options.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on Login to access user dashboard or relevant area to simulate Evolution API downtime during WhatsApp message sync.\n        frame = context.pages[-1]\n        # Click on Login button to access user area for testing Evolution API failure during WhatsApp sync\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input test email and send access link to login and reach user dashboard for Evolution API failure simulation.\n        frame = context.pages[-1]\n        # Input test email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link and login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Evolution API sync successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The system did not handle Evolution API downtime gracefully during WhatsApp message sync. Expected user-friendly error message and retry option, but found none.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Reported the login issue blocking access to the user dashboard. Cannot proceed with testing external service failure handling until login is fixed. Stopping further actions.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298396098182//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.718Z",
    "modified": "2025-11-04T23:19:56.258Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "91c24011-9c3b-4eef-a7d7-fa4902fdd852",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC013-Conversion Tracking from Trial to Paid Subscription",
    "description": "Verify that conversion from trial users to paid subscribers is tracked correctly and that trial expiry triggers email/banner notifications to users.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on the button to start free trial registration.\n        frame = context.pages[-1]\n        # Click 'Começar Agora - GRÁTIS' button to start free trial registration\n        elem = frame.locator('xpath=html/body/div/div/section/div[2]/div/div/div[6]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Começar Agora' button for the Plano Corretor to start the free trial.\n        frame = context.pages[-1]\n        # Click 'Começar Agora' button for Plano Corretor to start free trial\n        elem = frame.locator('xpath=html/body/div/div/section[6]/div/div[2]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the registration form with valid user data and submit to start the free trial.\n        frame = context.pages[-1]\n        # Input full name in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input email in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input WhatsApp number in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11999999999')\n        \n\n        frame = context.pages[-1]\n        # Input CPF in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678900')\n        \n\n        frame = context.pages[-1]\n        # Input CEP in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345000')\n        \n\n        frame = context.pages[-1]\n        # Input house number in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('123')\n        \n\n        frame = context.pages[-1]\n        # Input address complement in registration form\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[8]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Apt 101')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit registration and start free trial\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input valid WhatsApp number, CPF, and CEP to fix validation errors and resubmit the registration form.\n        frame = context.pages[-1]\n        # Input valid WhatsApp number\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[4]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('11987654321')\n        \n\n        frame = context.pages[-1]\n        # Input valid CPF\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[5]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('12345678909')\n        \n\n        frame = context.pages[-1]\n        # Input valid CEP\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[6]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('01001-000')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' button to submit registration with valid data\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[7]/div/div/input[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try to log in with the registered user credentials to verify if the trial account was created and active.\n        frame = context.pages[-1]\n        # Click 'Experimentar Grátis' button to go to login or trial start page\n        elem = frame.locator('xpath=html/body/div/div/section[3]/div[2]/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Começar teste grátis' or login submit button\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Fechar' button to close the error modal and navigate to login page to attempt login with existing user.\n        frame = context.pages[-1]\n        # Click 'Fechar' button to close error modal\n        elem = frame.locator('xpath=html/body/div/div/div/div[2]/div/div[2]/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Login' button in the top navigation to go to the login page and attempt login with existing user credentials.\n        frame = context.pages[-1]\n        # Click 'Login' button in top navigation to go to login page\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input the registered email 'testuser@example.com' into the email field and submit to attempt login.\n        frame = context.pages[-1]\n        # Input registered email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to submit login request\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Simulate login using the access link or navigate to user dashboard if possible to verify trial status and proceed with trial expiry simulation.\n        await page.goto('http://localhost:3000/dashboard', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Click 'Login' button to go to login page and perform login with access link or credentials.\n        frame = context.pages[-1]\n        # Click 'Login' button in top navigation to go to login page\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input the registered email 'testuser@example.com' and click 'Enviar link de acesso' to attempt login.\n        frame = context.pages[-1]\n        # Input registered email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to submit login request\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Trial Conversion Successful').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Conversion from trial users to paid subscribers was not tracked correctly, and trial expiry notifications were not triggered as expected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The task to verify conversion from trial users to paid subscribers and trial expiry notifications was partially completed. We successfully registered a trial user or confirmed an existing user, submitted login requests, and received confirmation for access link sent. However, due to system limitations, we could not simulate trial expiry or verify email/banner notifications triggered by trial expiry. Conversion tracking in analytics and user status update could not be fully verified. Further manual or backend testing is recommended to complete these steps.\nBrowser Console Logs:\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&email=eq.testuser%40example.com:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/corretores?select=id&cpf=eq.123.456.789-09:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 406 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/usuarios?select=id&whatsapp=eq.%2811%29+98765-4321:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 409 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/rest/v1/contas?select=*:0:0)\n[ERROR] 2025-11-04T23:21:04.892Z [SIGNUP] Erro ao criar conta {code: 23505, details: Key (documento)=(12345678909) already exists., hint: null, message: duplicate key value violates unique constraint \"contas_documento_key\"} (at http://localhost:3000/src/utils/logger.ts:57:14)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/176229894060014//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.726Z",
    "modified": "2025-11-04T23:29:00.815Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "6fb2ff22-9bde-461c-bb15-ebe08dfdbbca",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC014-Client Memory Functionality: History, Preferences, Notes",
    "description": "Ensure client's smart memory features correctly load and update stored history, preferences, and notes across sessions and users with proper synchronization.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Navigate to a client detail page\n        frame = context.pages[-1]\n        # Click on Login to access client area\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email and send access link to login\n        frame = context.pages[-1]\n        # Input email for login\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Enviar link de acesso' button to send access link\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Smart Memory Sync Failure').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: Client smart memory features did not load or update stored history, preferences, and notes correctly across sessions and users as required by the test plan.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login process failed with unknown error, preventing access to client detail page. Cannot continue testing smart memory features without successful login. Reporting issue and stopping.\nBrowser Console Logs:\n[ERROR] Failed to load resource: the server responded with a status of 429 () (at https://zpzzvkjwnttrdtuvtmwv.supabase.co/auth/v1/otp?redirect_to=https%3A%2F%2Fguido-mauve.vercel.app%2Fapp:0:0)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/1762298434419829//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.734Z",
    "modified": "2025-11-04T23:20:34.615Z"
  },
  {
    "projectId": "1eedcfb2-e6eb-485d-8642-dcf7c9584e49",
    "testId": "eaa39c95-7e4f-4497-b69f-f7bb77eab8f4",
    "userId": "549824b8-d0c1-7042-ff76-8f8d1b34a363",
    "title": "TC015-Multi-Tenant Data Isolation and Security",
    "description": "Verify that different tenant data is strictly isolated using Row Level Security and that users cannot access data of other tenants under any circumstances.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on the Login button to start login as user in tenant A\n        frame = context.pages[-1]\n        # Click on the Login button to start login as user in tenant A\n        elem = frame.locator('xpath=html/body/div/div/nav/div/button[6]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input email for user in tenant A and submit login request\n        frame = context.pages[-1]\n        # Input email for user in tenant A\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('userA@tenantA.com')\n        \n\n        frame = context.pages[-1]\n        # Click on 'Enviar link de acesso' button to submit login request\n        elem = frame.locator('xpath=html/body/div/div/div/div/form/div/div[2]/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Unauthorized Tenant Data Access Attempt').first).to_be_visible(timeout=5000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Row Level Security enforcement failed. User from tenant A was able to access or manipulate data from tenant B, violating strict tenant data isolation.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Login submission failed; cannot proceed with tenant data isolation testing. Reported issue and stopped further actions.",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/549824b8-d0c1-7042-ff76-8f8d1b34a363/176229839721091//tmp/test_task/result.webm",
    "created": "2025-11-04T23:16:19.742Z",
    "modified": "2025-11-04T23:19:57.346Z"
  }
]
